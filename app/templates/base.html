<!DOCTYPE html>
<html lang="es" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Panel de Administración{% endblock %} - Sistema de Reservas Camping Arequita</title>
    
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Flowbite -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.2.1/flowbite.min.css" rel="stylesheet" />
    
    <!-- Configuración de Tailwind -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    colors: {
                        primary: {
                            50: '#eff6ff', 100: '#dbeafe', 200: '#bfdbfe', 300: '#93c5fd', 400: '#60a5fa',
                            500: '#3b82f6', 600: '#2563eb', 700: '#1d4ed8', 800: '#1e40af', 900: '#1e3a8a',
                        }
                    }
                }
            }
        }
    </script>

    <style>
        body { font-family: 'Inter', sans-serif; }

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.375rem;
            border-radius: 0.75rem;
            border: 1px solid transparent;
            padding: 0.5rem 0.875rem;
            font-size: 0.875rem;
            font-weight: 700;
            line-height: 1;
            transition: all 0.2s ease;
            cursor: pointer;
            text-decoration: none;
            white-space: nowrap;
        }

        .btn:hover { filter: brightness(0.96); }
        .btn:focus { outline: none; box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.25); }

        .btn-sm { padding: 0.4rem 0.75rem; font-size: 0.75rem; border-radius: 0.625rem; }
        .btn-xs { padding: 0.3rem 0.6rem; font-size: 0.7rem; border-radius: 0.55rem; }
        .btn-block { width: 100%; }

        .btn-primary { background: #2563eb; color: #fff; }
        .btn-primary:hover { background: #1d4ed8; }

        .btn-success { background: #059669; color: #fff; }
        .btn-success:hover { background: #047857; }

        .btn-error { background: #dc2626; color: #fff; }
        .btn-error:hover { background: #b91c1c; }

        .btn-info { background: #2563eb; color: #fff; }
        .btn-info:hover { background: #1d4ed8; }

        .btn-ghost {
            background: #f1f5f9;
            color: #334155;
            border-color: #e2e8f0;
        }

        .btn-ghost:hover {
            background: #e2e8f0;
            color: #0f172a;
        }

        .btn-outline { background: #fff; }
        .btn-outline.btn-error { color: #dc2626; border-color: #fecaca; }
        .btn-outline.btn-error:hover { background: #fef2f2; color: #b91c1c; }
        .btn-outline.btn-info { color: #2563eb; border-color: #bfdbfe; }
        .btn-outline.btn-info:hover { background: #eff6ff; color: #1d4ed8; }

        .btn-circle {
            width: 2rem;
            height: 2rem;
            padding: 0;
            border-radius: 9999px;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-900 antialiased">

    <!-- Navbar Superior -->
    <nav class="fixed top-0 z-50 w-full bg-white/80 backdrop-blur-md border-b border-slate-200">
        <div class="px-3 py-3 lg:px-5 lg:pl-3">
            <div class="flex items-center justify-between">
                <div class="flex items-center justify-start">
                    <button data-drawer-target="logo-sidebar" data-drawer-toggle="logo-sidebar" aria-controls="logo-sidebar" type="button" class="inline-flex items-center p-2 text-sm text-slate-500 rounded-lg sm:hidden hover:bg-slate-100 focus:outline-none focus:ring-2 focus:ring-slate-200">
                        <span class="sr-only">Abrir menú lateral</span>
                        <svg class="w-6 h-6" aria-hidden="true" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                           <path clip-rule="evenodd" fill-rule="evenodd" d="M2 4.75A.75.75 0 012.75 4h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 4.75zm0 10.5a.75.75 0 01.75-.75h7.5a.75.75 0 010 1.5h-7.5a.75.75 0 01-.75-.75zM2 10a.75.75 0 01.75-.75h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 10z"></path>
                        </svg>
                    </button>
                    <a href="{{ url_for('admin.dashboard') }}" class="flex ms-2 md:me-24">
                        <span class="self-center text-xl font-bold sm:text-2xl whitespace-nowrap bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent">Sistema de Reservas Camping Arequita</span>
                    </a>
                </div>
                <div class="flex items-center">
                    <div class="flex items-center ms-3">
                        <div>
                            <button type="button" class="flex text-sm bg-slate-800 rounded-full focus:ring-4 focus:ring-slate-300" aria-expanded="false" data-dropdown-toggle="dropdown-user">
                                <span class="sr-only">Abrir menú de usuario</span>
                                <div class="w-8 h-8 rounded-full bg-slate-300 flex items-center justify-center text-slate-700 font-bold">
                                    {{ current_user.username[0].upper() if current_user.is_authenticated else 'A' }}
                                </div>
                            </button>
                        </div>
                        <div class="z-50 hidden my-4 text-base list-none bg-white divide-y divide-slate-100 rounded shadow" id="dropdown-user">
                            <div class="px-4 py-3" role="none">
                                <p class="text-sm text-slate-900" role="none">
                                    {{ current_user.username if current_user.is_authenticated else 'Invitado' }}
                                </p>
                                <p class="text-sm font-medium text-slate-900 truncate" role="none">
                                    {{ current_user.email if current_user.is_authenticated else '' }}
                                </p>
                            </div>
                            <ul class="py-1" role="none">
                                <li>
                                    <a href="{{ url_for('admin.logout') }}" class="block px-4 py-2 text-sm text-slate-700 hover:bg-slate-100" role="menuitem">Cerrar Sesión</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Sidebar Lateral -->
    <aside id="logo-sidebar" class="fixed top-0 left-0 z-40 w-64 h-screen pt-20 transition-transform -translate-x-full bg-white border-r border-slate-200 sm:translate-x-0" aria-label="Sidebar">
        <div class="h-full px-3 pb-4 overflow-y-auto bg-white">
            <ul class="space-y-2 font-medium">
                <li>
                    <a href="{{ url_for('admin.dashboard') }}" class="flex items-center p-2 text-slate-900 rounded-xl hover:bg-slate-100 group">
                        <svg class="w-5 h-5 text-slate-500 transition duration-75 group-hover:text-slate-900" fill="currentColor" viewBox="0 0 20 20"><path d="M2 10a8 8 0 018-8v8h8a8 8 0 11-16 0z"></path><path d="M12 2.252A8.014 8.014 0 0117.748 8H12V2.252z"></path></svg>
                        <span class="ms-3">Dashboard</span>
                    </a>
                </li>
                <li>
                    <a href="{{ url_for('admin.camping_services') }}" class="flex items-center p-2 text-slate-900 rounded-xl hover:bg-slate-100 group">
                        <svg class="w-5 h-5 text-slate-500 transition duration-75 group-hover:text-slate-900" fill="currentColor" viewBox="0 0 20 20"><path d="M3 3h14v4H3V3zm0 5h14v9H3V8zm2 2v5h4v-5H5z"></path></svg>
                        <span class="ms-3">Productos del Camping</span>
                    </a>
                </li>
                <li>
                    <a href="{{ url_for('admin.camping_amenities') }}" class="flex items-center p-2 text-slate-900 rounded-xl hover:bg-slate-100 group">
                        <svg class="w-5 h-5 text-slate-500 transition duration-75 group-hover:text-slate-900" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"></path></svg>
                        <span class="ms-3">Comodidades</span>
                    </a>
                </li>
                <li>
                    <a href="{{ url_for('admin.camping_hero_images') }}" class="flex items-center p-2 text-slate-900 rounded-xl hover:bg-slate-100 group">
                        <svg class="w-5 h-5 text-slate-500 transition duration-75 group-hover:text-slate-900" fill="currentColor" viewBox="0 0 20 20"><path d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>
                        <span class="ms-3">Portadas Hero</span>
                    </a>
                </li>
                <li>
                    <a href="{{ url_for('admin.camping_testimonials') }}" class="flex items-center p-2 text-slate-900 rounded-xl hover:bg-slate-100 group">
                        <svg class="w-5 h-5 text-slate-500 transition duration-75 group-hover:text-slate-900" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927C9.469 1.63 11.53 1.63 11.95 2.927l1.072 3.302a1 1 0 00.95.69h3.47c1.364 0 1.93 1.746.826 2.549l-2.808 2.04a1 1 0 00-.364 1.118l1.072 3.302c.42 1.297-1.064 2.37-2.168 1.568l-2.808-2.04a1 1 0 00-1.176 0l-2.808 2.04c-1.104.802-2.588-.27-2.168-1.568l1.072-3.302a1 1 0 00-.364-1.118L2.73 9.468c-1.104-.803-.538-2.55.826-2.55h3.47a1 1 0 00.95-.69l1.072-3.301z"></path></svg>
                        <span class="ms-3">Testimonios</span>
                    </a>
                </li>
                <li>
                    <a href="{{ url_for('admin.camping_pre_reservations') }}" class="flex items-center p-2 text-slate-900 rounded-xl hover:bg-slate-100 group">
                        <svg class="w-5 h-5 text-slate-500 transition duration-75 group-hover:text-slate-900" fill="currentColor" viewBox="0 0 20 20"><path d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v2h16V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zM18 10H2v6a2 2 0 002 2h12a2 2 0 002-2v-6z"></path></svg>
                        <span class="ms-3">Pre-reservas</span>
                    </a>
                </li>
                <li>
                    <a href="{{ url_for('admin.camping_suggestions') }}" class="flex items-center p-2 text-slate-900 rounded-xl hover:bg-slate-100 group">
                        <svg class="w-5 h-5 text-slate-500 transition duration-75 group-hover:text-slate-900" fill="currentColor" viewBox="0 0 20 20"><path d="M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.8 2 11.45 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7z"></path></svg>
                        <span class="ms-3">Sugerencias</span>
                    </a>
                </li>
                <li>
                    <a href="{{ url_for('admin.camping_media_cleanup') }}" class="flex items-center p-2 text-slate-900 rounded-xl hover:bg-slate-100 group">
                        <svg class="w-5 h-5 text-slate-500 transition duration-75 group-hover:text-slate-900" fill="currentColor" viewBox="0 0 20 20"><path d="M6 2a1 1 0 00-1 1v1H3a1 1 0 100 2h14a1 1 0 100-2h-2V3a1 1 0 00-1-1H6zM4 7h12l-1 10a2 2 0 01-2 2H7a2 2 0 01-2-2L4 7z"></path></svg>
                        <span class="ms-3">Limpieza MinIO</span>
                    </a>
                </li>
                {% if current_user.is_superuser %}
                <li class="pt-4 mt-4 border-t border-slate-100">
                    <a href="{{ url_for('admin.audit_logs') }}" class="flex items-center p-2 text-red-600 rounded-xl hover:bg-red-50 group font-bold">
                        <svg class="flex-shrink-0 w-5 h-5 text-red-500 transition duration-75 group-hover:text-red-700" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path></svg>
                        <span class="ms-3">Auditoría</span>
                    </a>
                </li>
                {% endif %}
            </ul>
        </div>
    </aside>

    <!-- Contenido Principal -->
    <div class="p-4 sm:ml-64">
        <div class="p-4 mt-14">
            
            <!-- Mensajes Flash -->
            {% with messages = get_flashed_messages(with_categories=true) %}
                {% if messages %}
                    <div class="mb-6 space-y-2">
                        {% for category, message in messages %}
                            <div class="p-4 mb-4 text-sm rounded-2xl {% if category == 'success' %}text-emerald-800 bg-emerald-50 border border-emerald-100{% elif category == 'error' %}text-rose-800 bg-rose-50 border border-rose-100{% else %}text-blue-800 bg-blue-50 border border-blue-100{% endif %}" role="alert">
                                {{ message }}
                            </div>
                        {% endfor %}
                    </div>
                {% endif %}
            {% endwith %}

            {% block content %}{% endblock %}
        </div>
    </div>

    <!-- Flowbite JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.2.1/flowbite.min.js"></script>
    {% block scripts %}{% endblock %}
</body>
</html>
